* C:\Users\Bruce Banner\Documents\GitHub\ADC_experiments\ideal_sims\tb_comparator.asc
V1 VIN 0 0.5
V2 VDD 0 1
V3 CLKRAW 0 PULSE(0 1 500n 10n 10n 1u 5u 2)
E1 _CLKRAW N001 CLKRAW 0 -1
V4 N001 0 1
V5 NC_01 0 PULSE({-input} {input} 0 10u 10n 10u 10u)
V6 VIP VIN {input}
XX8 CLKRAW RESULT VDD VIN VIP 0 DONE dyn_comparator
XX1 VDD RESULT VDD VIN VIP_AC 0 DONE dyn_comparator
V7 VIP_AC VIN 0 AC 1

* block symbol definitions
.subckt dyn_comparator CLKIN RESULT VDD VIN VIP VSS DONE
M4 INTH CLK VDD VDD PMOS W=40u L=1u
M2 SRC CLK N003 N003 NMOS W=10u L=1u
M8 OUTH OUTL N001 N001 PMOS W=40u L=1u
M10 OUTL OUTH N001 N001 PMOS W=40u L=1u
M11 OUTL OUTH VSS VSS NMOS W=10u L=1u
M12 OUTH OUTL VSS VSS NMOS W=10u L=1u
M13 OUTL _CLK VSS VSS NMOS W=1u L=1u
M15 OUTL INTH VDD VDD PMOS W=4u L=1u
M16 OUTH INTL VDD VDD PMOS W=4u L=1u
A1 OUTH 0 N004 0 0 0 RESULT 0 DFLOP
A3 N005 0 0 0 N006 0 N004 0 XOR
M6 OUTH _CLK VSS VSS NMOS W=1u L=1u
M7 N001 _CLK VDD VDD PMOS W=4u L=1u
XX1 OUTH N005 VDD VSS skewh_inverter
XX2 OUTL N006 VDD VSS skewh_inverter
A7 N004 _CLK 0 0 0 0 DONE 0 SRFLOP
M9 INTL CLK VDD VDD PMOS W=40u L=1u
M14 INTH VIN SRC SRC NMOS W=1u L=10u
M1 INTL VIP SRC SRC NMOS W=1u L=10u
XX5 CLKIN N002 VDD VSS skewm_inverter
XX6 N002 CLK VDD VSS skewm_inverter
A5 OUTL 0 N004 0 0 0 0 0 DFLOP
XX7 CLK _CLK VDD VSS skewm_inverter
C1 N003 VSS {C_quench}
M3 N003 _CLK VSS VSS NMOS W=10u L=1u
.lib 130nm_bulk.txt
.param width=1u len=1u
.param C_slow=1f C_quench=100f
.ic V(SRC)=0.2 V(INTH)=0.5 V(INTL)=0.5
.ends dyn_comparator

.subckt skewh_inverter IN OUT VDD VSS
M1 OUT IN VDD VDD PMOS W=40u L=1u
M2 OUT IN VSS VSS NMOS W=1u L=10u
.lib 130nm_bulk.txt
.ends skewh_inverter

.subckt skewm_inverter IN OUTH VDD VSS
M1 OUTH IN VDD VDD PMOS W=4u L=1u
M2 OUTH IN VSS VSS NMOS W=1u L=1u
.lib 130nm_bulk.txt
.ends skewm_inverter

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\Bruce Banner\Documents\LTspiceXVII\lib\cmp\standard.mos
.lib 130nm_bulk.txt
* .tran 3u
.param width=1u len=1u
* .step param WIDTH list 1u 10u 20u
* .step param LEN list 1u 2u
.param input=10m
* .step param input -100u 100u 50u
* .step param c_slow list 1p 2p 3p
.param C_slow=1f C_quench=100f
.ac dec 10 1 1G
.backanno
.end
